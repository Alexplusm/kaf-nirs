!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){const n=document.getElementsByName("btnDelete")[0],o=document.getElementsByName("btnUpdate")[0],a=document.getElementsByName("btnCreate")[0],s=document.getElementsByName("btnApplyUpdates")[0],r=document.getElementsByName("btnCancel")[0];e.exports={btnDelete:n,btnUpdate:o,btnCreate:a,btnApplyUpdates:s,btnCancel:r}},function(e,t,n){const{csrfSafeMethod:o}=n(7);e.exports={ajaxRequest:({type:e,url:t,data:n})=>{const o=new XMLHttpRequest;console.log("+++ type",e),console.log("+++ url",t),console.log("+++ data",n);let a=t;if(n){for(key in a+="?",n)a+=`${key}=${n[key]}&`;a=a.slice(0,a.length-1)}console.log("--- finalUrl",a),o.open(e,a,!0),o.send(),o.onload=function(){200!=this.status?console.log(this.status+": "+this.statusText):console.log("--- JSON ---",JSON.parse(this.responseText))}}}},function(e,t){const n=document.forms.mainForm,o=n.subject,a=n.timeStart,s=n.timeEnd,r=n.noteText,i=n.distance,l=n.tester,c=[o,a,s],d=[r,i,l].concat(c),u=()=>{d.forEach(e=>{""===e.value||"-1"===e.value?(e.classList.add("is-invalid"),e.classList.remove("is-valid")):(e.classList.remove("is-invalid"),e.classList.add("is-valid"))})};e.exports={disabledForm:()=>{c.forEach(e=>{e.setAttribute("disabled",!0)}),r.setAttribute("disabled",!0),l.setAttribute("disabled",!0),i.setAttribute("disabled",!0)},abledForm:()=>{c.forEach(e=>{e.removeAttribute("disabled")}),r.removeAttribute("disabled"),l.removeAttribute("disabled"),i.removeAttribute("disabled")},resetForm:()=>{c.forEach(e=>{e.value=null}),l.value=-1,i.value=-1},setForm:({subject:e,timeStart:t,timeEnd:n,noteText:c,distance:d,tester:u})=>{o.value=e||null,r.value=c||null,a.value=t||null,s.value=n||null,l.selectedIndex=u||null,i.selectedIndex=d||null},retrieveForm:()=>{o.value,r.value,a.value,s.value,l.value,i.value;u()},formIsValid:()=>{const e=c.every(e=>(console.log("*** item",e.value),!!e.value)),t="-1"!==i.value,n="-1"!==l.value;return e&&t&&n},formValidation:u,initForm:()=>{c.forEach(e=>{e.addEventListener("focus",()=>{e.classList.remove("is-invalid")})}),r.addEventListener("focus",()=>{r.classList.remove("is-invalid")}),i.addEventListener("focus",()=>{i.classList.remove("is-invalid")}),l.addEventListener("focus",()=>{l.classList.remove("is-invalid")})},resetFormValidation:()=>{d.forEach(e=>{e.classList.remove("is-invalid"),e.classList.remove("is-valid")})}}},function(e,t,n){const{btnUpdate:o,btnApplyUpdates:a}=n(0),{abledForm:s}=n(2),r=document.querySelector(".blank-form"),i=document.querySelector(".event-form"),l=document.querySelector(".event-owner");e.exports={FormState:class{constructor(){this.formState=1}getFormState(){return this.formState}setNewState(e){this.formState=e,this.changes()}changes(){switch(this.formState){case 1:r.classList.remove("d-none"),i.classList.add("d-none"),l.classList.add("d-none");break;case 2:r.classList.add("d-none"),i.classList.remove("d-none"),l.classList.remove("d-none"),a.setAttribute("disabled",!0),o.removeAttribute("disabled");break;case 3:r.classList.add("d-none"),i.classList.remove("d-none"),o.setAttribute("disabled",!0),a.removeAttribute("disabled"),s()}}}}},function(e,t,n){const{disabledForm:o,abledForm:a,resetForm:s,setForm:r,retrieveForm:i,resetFormValidation:l}=n(2),{ajaxRequest:c}=n(1),{FormState:d}=n(3),u=new d,m=()=>{u.setNewState(3)},f=()=>{$("#mainForm").modal("show")},{btnDelete:v,btnUpdate:p,btnCreate:b,btnApplyUpdates:E,btnCancel:g}=n(0);v.addEventListener("click",()=>{console.log("btnDelete",v)}),p.addEventListener("click",()=>{console.log("btnUpdate",p),m()}),b.addEventListener("click",()=>{console.log("btnCreate",b),i()}),E.addEventListener("click",()=>{console.log("btnApplyUpdates",E)}),e.exports={openBlankForm:e=>{s(),a(),l(),u.setNewState(1);const t=moment(e);t.isValid&&(pickTime=t.format("HH:mm"),"00:00"!==pickTime&&r({timeStart:pickTime})),f()},openWithEventForm:e=>{o(),l(),u.setNewState(2),console.log("eventick",e);const t=e.start.format("HH:mm"),n=e.end.format("HH:mm");let a={subject:e.test_object,timeStart:t,timeEnd:n,noteText:e.note_text,distance:e.distance_num,tester:e.tester_id};r(a),f()},changeFormStateToUpdate:m,formState:u}},function(e,t,n){const{openBlankForm:o,openWithEventForm:a}=n(4),s=document.getElementById("unitId").value;document.getElementById("unitName").value,document.getElementById("loginedUser").value;e.exports={fullCalendar:function(){$("#calendar").fullCalendar({locale:"ru",themeSystem:"jquery-ui",defaultView:"agendaWeek",events:{type:"GET",url:"../../unit_schedule/",data:{unit:s},cache:!1,success:function(e,t){console.log(e)},textColor:"black"},header:{left:"prev next",center:"title",right:"month,agendaWeek,agendaDay"},eventClick:function(e){a(e)},dayClick:function(e){o(e.format())}})}}},function(e,t,n){const{fullCalendar:o}=n(5),{initForm:a}=n(2);var s=document.getElementById("unitId").value,r=(document.getElementById("unitName").value,document.getElementById("loginedUser").value,"1");const{ajaxRequest:i}=n(1);$(document).ready(o()),$(document).ready(a());const{csrfSafeMethod:l}=n(7);function c(){retrieveSelectOfTester(),retrieveSelectOfDistance(),retrieveFormObject(),retrieveFormNote(),form=document.getElementById("formInputTimeStart"),timeStart=String(r+" "+String(form.value).slice(0,-1)),form=document.getElementById("formInputTimeEnd"),timeEnd=String(r+" "+String(form.value).slice(0,-1))}!function(e){e(function(){e("input.timepicker").timepicker({zindex:99999,timeFormat:"H:mm ",interval:30,minTime:"8",maxTime:"9:00pm",defaultTime:"12",startTime:"08:00",dynamic:!1,dropdown:!0,scrollbar:!0})})}(jQuery),$(function(){$("#model-submit").click(function(e){e.preventDefault(),c(),console.log(timeStart),$.ajax({beforeSend:function(e,t){var n=Cookies.get("csrftoken");l(t.type)||this.crossDomain||e.setRequestHeader("X-CSRFToken",n)},type:"POST",url:"../../unit_schedule/",data:{unit:s,start_work:timeStart,end_work:timeEnd,tester:selectTesterValue,distance:selectDistanceValue,test_object:formInputObjectValue,note_text:formInputNoteText},cache:!1,success:function(e){console.log(e),location.reload(),Notify.generate("Вы записались!","Успех",1)},error:function(e){console.log(e.responseText),Notify.generate(e.responseText,"Error",3)}}),$("#exampleModal").modal("hide")})}),Notify={TYPE_INFO:0,TYPE_SUCCESS:1,TYPE_WARNING:2,TYPE_DANGER:3,generate:function(e,t,n){var o=[this.TYPE_INFO,this.TYPE_SUCCESS,this.TYPE_WARNING,this.TYPE_DANGER],a=["alert-info","alert-success","alert-warning","alert-danger"],s=a[this.TYPE_INFO];void 0!==n&&-1!==o.indexOf(n)&&(s=a[n]);var r="";t&&(r+="<h4>"+t+"</h4>"),r+="<p>"+e+"</p>";var i=$("<div class='alert "+s+"'><button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>×</span></button>"+r+"</div>");setTimeout(function(){i.alert("close")},3e3),i.appendTo($("#notifies"))}}},function(e,t){e.exports={csrfSafeMethod:e=>/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)}}]);